---
title: "Ejemplo de uso del paquete `geouy`"
author: Richard Detomasi
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Ejemplo de uso del paquete `geouy`}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```


El paquete `geouy` tiene como objetivo facilitar el trabajo de les usuaries que trabajen con los datos geográficos de Uruguay, y este tutorial busca ejemplificar el uso de las funciones del paquete.

## Instalación

<!-- Para instalar la versión estable del paquete usar: -->

<!-- ```{r eval=FALSE, message=FALSE, warning=FALSE, include=TRUE} -->
<!-- install.packages('geouy') -->
<!-- ``` -->

Para instalar la versión en desarrollo:

```{r, eval=FALSE, message=FALSE, warning=FALSE, include=TRUE}
# install.packages('devtools') si no tiene instalado devtools
devtools::install_github("RichDeto/geouy")
```

Para activarla 

```{r setup, message=FALSE, warning=FALSE, include=TRUE }
knitr::opts_chunk$set(
	eval = FALSE,
	message = FALSE,
	warning = FALSE,
	include = FALSE
)
library(geouy)
```


## Ejemplos de usos


### Cargar geometrías

Obtengamos como primer paso las geometrías de los peajes de Uruguay 


```{r eval=FALSE, message=FALSE, warning=FALSE, include=FALSE}
depor <- geouy::load_geouy("Instituciones deportivas")
```

Por defecto me traerá estas geometrías en EPSG 32721 que es el CRS correspondiente a Uruguay, por lo que no lo especifico en el parámetro correspondiente.

### Goecodificación

Ahora bien, tenemos algunas direcciones de nuevas Instituciones sin coordenadas, por lo que usaremos `geocode_ide_uy()` para  geocodificarlas:

```{r eval=FALSE, message=FALSE, warning=FALSE, include=FALSE}
nuevas <- data.frame(cbind(dpto = c("Montevideo", "Salto"),
                           loc = c("Montevideo", "Salto"),
                           dir = c("Cebollati esq. Magallanes",
                                   "15 de noviembre 1310")),
                     stringsAsFactors = F)
nuevas_geo <- geocode_ide_uy(nuevas)

```

NOTA: Limits in geocode_geouy(), you must be part of uruguayan public organism and  fill this (forms)[https://www.gub.uy/agencia-gobierno-electronico-sociedad-informacion-conocimiento/comunicacion/publicaciones/formularios-de-alta-y-consumo-de-servicios-de-la-pdi] if your organism is not yet vinculated.

### Asignar codigos y nombres de otras geometrías

Continuando con el ejemplo, asignémosle a las `Instituciones deportivas`, los códigos y nombres de departamentos correspondientes, utilizando la función `which_uy()` como se muestra a continuación: 

```{r eval=FALSE, message=FALSE, warning=FALSE, include=FALSE}
depor_dep <- geouy::which_uy(depor, "Departamentos")
```

NOTA: El segundo parámetro tiene que corresponder con un valor de `geouy::metadata$capa` para funcionar.


