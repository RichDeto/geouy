plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.6, y = -30.7, label = "GeoUy", color = "#5796c9",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "#e6eaed", h_color = "#f2f266", # hexagon
filename = "./man/figures/GeoUy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "GeoUy", color = "#5796c9",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "#e6eaed", h_color = "#f2f266", # hexagon
filename = "./man/figures/GeoUy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "GeoUy", color = "#5796c9",
size = 25, fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "#e6eaed", h_color = "#f2f266", # hexagon
filename = "./man/figures/GeoUy_logo_a.png", dpi = 400)  # output name and resolution
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
filename = "./man/figures/GeoUy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "GeoUy", color = "#4dc0d1",
size = 25, fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
filename = "./man/figures/GeoUy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 25, fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .2, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 25, fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
x <- geouy::metadata
library(geouy)
x <- geouy::metadata
x$url[x$capa == c, 1]
x$url[x$capa == c]
c = "Secciones"
x$url[x$capa == c, 1]
x$url[x$capa == c]
library(hexSticker) # https://github.com/GuangchuangYu/hexSticker
library(ggplot2)
library(sf)
library(geouy)
# add special text font
library(sysfonts)
font_add_google(name = "Roboto", family = "Roboto")
library(extrafont)
font_import()
loadfonts(device = "win")
# Download shape files
d <- load_geouy("Departamentos", crs = 4326)
s <- load_geouy("Secciones", crs = 4326)
c = "Secciones"
x <- geouy::metadata
st_read(x$url[x$capa == c], crs = x$crs[x$capa == c]) %>%
st_transform(crs)
crs = 32721
s <- st_read(x$url[x$capa == c], crs = x$crs[x$capa == c]) %>%
st_transform(crs)
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
st_read(x$url[x$capa == c], crs = x$crs[x$capa == c]) %>%
st_transform(crs)
}
s <- load_geouy("Secciones", crs = 4326)
# Download shape files
d <- load_geouy("Departamentos", crs = 4326)
s_s <- st_simplify(s, preserveTopology = TRUE, dTolerance = .01)
### .png
plot_a <-
ggplot() +
geom_sf(data = s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .2, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
### .svg
plot_y_svg <-
ggplot() +
geom_sf(data = s, fill = NA, size = .08, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .35, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 6, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "geouy",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy"
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "geouy",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy",
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1, s_height = 1, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
spotlight = T,
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
spotlight = T, l_height = 7,
filename = "./man/figures/geouy_logo_a.svg", dpi = 400)  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.svg")  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
# spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.svg")  # output name and resolution
### .svg
plot_y_svg <-
ggplot() +
# geom_sf(data = s, fill = NA, size = .08, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .35, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 6, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
# spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.svg")  # output name and resolution
sticker(plot_y_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.svg")  # output name and resolution
### .png
plot_b <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .2, color = "black") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "black",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
library(hexSticker) # https://github.com/GuangchuangYu/hexSticker
library(ggplot2)
library(sf)
### .png
plot_b <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .2, color = "black") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "black",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
library(geouy)
# Download shape files
d <- load_geouy("Departamentos", crs = 4326)
s <- load_geouy("Secciones", crs = 4326)
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
st_read(x$url, crs = x$crs) %>%
st_transform(crs)
}
# Download shape files
d <- load_geouy("Departamentos", crs = 4326)
s <- load_geouy("Secciones", crs = 4326)
s_s <- st_simplify(s, preserveTopology = TRUE, dTolerance = .01)
### .png
plot_b <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .2, color = "black") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "black",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_b, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "#4dc0d1", h_color = "#4dc0d1", # hexagon
filename = "./man/figures/geouy_logo_b.png", dpi = 400)  # output name and resolution
### .svg
plot_b_svg <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .08, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .35, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 6, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_b_svg, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_b.svg")  # output name and resolution
### .png
plot_a <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_a <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .4, color = "#4dc0d1") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "#4dc0d1",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1",
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
### .png
plot_b <-
ggplot() +
# geom_sf(data = d_s, fill = NA, size = .3, color = "#5796c905") +
geom_sf(data = s_s, fill = NA, size = .2, color = "black") +
theme_void() +
theme(panel.grid.major = element_line(colour = "transparent")) +
#  theme(legend.position = "none") +
annotate("text", x = -54.7, y = -30.8, label = "geouy", color = "black",
size = 25, family = "Roboto", fontface = "bold", angle = -35) # (.png  size = 25)(.svg  size = 6)
sticker(plot_b, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "#4dc0d1", h_color = "#4dc0d1", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "black",
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_b.png", dpi = 400)  # output name and resolution
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1", u_size = 7,
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1", u_size = 5,
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1", u_size = 6,
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
sticker(plot_a, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "black", h_color = "black", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "#4dc0d1", u_size = 6,
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_a.png", dpi = 400)  # output name and resolution
sticker(plot_b, package = "",
s_x = 1.03, s_y = 1, s_width = 1.5, s_height = 1.5, # ggplot image size and position
h_fill = "#4dc0d1", h_color = "#4dc0d1", # hexagon
url = "https://github.com/RichDeto/geouy", u_color = "black", u_size = 6,
spotlight = T, l_height = 17,
filename = "./man/figures/geouy_logo_b.png", dpi = 400)  # output name and resolution
library(magrittr); library(dplyr)
metadata <- data.frame(
rbind(c("Departamentos", "IDE", "MIDES", 32721, "wfs", 2011,
"https://testmapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:Departamentos%20UY"),
c("Secciones", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy:443/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Secciones"),
c("Segmentos", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Segmentos"),
c("Zonas", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Zonas"),
c("Localidades_pg", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy:443/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Localidades_pg"),
c("Asentamientos irregulares", "PMB", "MIDES", 32721, "wfs", 2014,
"https://mapas.mides.gub.uy:443/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:ai_pmb_2014"),
c("Balnearios", "MTOP", "MTOP", 4326, "wfs", 2017,
"https://geoservicios.mtop.gub.uy/geoserver/mb_planos/v_balnearios/ows?service=WFS&request=GetFeature&typeName=v_balnearios"),
c("Cursos de agua navegables y flotables", "MTOP", "MTOP", 32721, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/rec_hidrograficos/cursos_nav_flot/ows?service=WFS&request=GetFeature&typeName=cursos_nav_flot"),
c("Lagunas públicas", "MTOP", "MTOP", 32721, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/rec_hidrograficos/lagunas_publicas/ows?service=WFS&request=GetFeature&typeName=lagunas_publicas"),
c("Rutas", "IDE", "MIDES", 32721, "wfs", 2017,
"https://testmapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:Carreteras%20Uruguay"),
c("Calles", "IDE - UTE - IM", "MIDES", 32721, "wfs", 2017,
"https://mapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:EjesUruguayUTE,IDE:EjesMontevideoIM"),
c("Peajes", "MTOP", "MTOP", 4326, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/inf_tte_ttelog_terrestre/peajes/ows?service=WFS&request=GetFeature&typeName=peajes"),
c("Postes Kilometros", "MTOP", "MTOP", 32721, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/inf_tte_ttelog_terrestre/postes_km/ows?service=WFS&request=GetFeature&typeName=postes_km")
), stringsAsFactors = FALSE)
names(metadata) <- c("capa","productor","repositor","crs","formato","anio","url")
View(metadata)
x <- geouy::metadata
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
ifelse(x$repositor == "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs)) %>%
st_transform(crs)
}
cp <- load_geouy("Centros poblados pg")
library(magrittr)
cp <- load_geouy("Centros poblados pg")
library(sf)
library(dplyr)
cp <- load_geouy("Centros poblados pg")
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
y <- ifelse(x$repositor == "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs))
y %>% st_transform(crs)
}
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
y <- ifelse(x$repositor == "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs))
y %>% st_transform(crs)
}
cp <- load_geouy("Centros poblados pg")
y <- ifelse(x$repositor %in% "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs))
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
y <- ifelse(x$repositor %in% "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs))
y %>% st_transform(crs)
}
cp <- load_geouy("Centros poblados pg")
c = "Centros poblados pg"
x <- geouy::metadata
x <- x[x$capa == c,]
x <- geouy::metadata
View(x)
library(magrittr); library(dplyr)
metadata <- data.frame(
rbind(c("Areas administrativas", "SGM", "SGM", 4326, "wfs", 2011, "polnbda_ury"),
c("Departamentos", "IGM", "IGM", 4326, "wfs", 2011,
"WFS:https://srvgis.igm.gub.uy/arcgis/services/LimiteDepartamental_wfs_250000/MapServer/WFSServer"),
# c("Departamentos", "IDE", "MIDES", 32721, "wfs", 2011,
#   "https://testmapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:Departamentos%20UY"),
c("Secciones", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy:443/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Secciones"),
c("Segmentos", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Segmentos"),
c("Zonas", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Zonas"),
c("Localidades_pg", "INE", "MIDES", 32721, "wfs", 2011,
"https://mapas.mides.gub.uy:443/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=INECenso:Localidades_pg"),
# c("Area urbanizada pg", "IGM", "IGM", 4326, "wfs", 2011,
#   "WFS:https://srvgis.igm.gub.uy/arcgis/services/AreaUrbanizada_wfs_20000/MapServer/WFSServer"),
# c("Area urbanizada pt", "IGM", "IGM", 4326, "wfs", 2011,
# "WFS:https://srvgis.igm.gub.uy/arcgis/services/AreaUrbanizadaP_wfs_10000/MapServer/WFSServer"),
c("Centros poblados pg", "SGM", "SGM", 4326, "wfs", 2011, "builtupa"),
c("Centros poblados pt", "SGM", "SGM", 4326, "wfs", 2011, "builtupp"),
c("Municipios", "IGM", "IGM", 4326, "wfs", 2011,
"WFS:https://srvgis.igm.gub.uy/arcgis/services/LimitesMunicipales_wfs_250000/MapServer/WFSServer"),
c("Asentamientos irregulares", "PMB", "MIDES", 32721, "wfs", 2014,
"https://mapas.mides.gub.uy:443/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:ai_pmb_2014"),
c("Balnearios", "MTOP", "MTOP", 4326, "wfs", 2017,
"https://geoservicios.mtop.gub.uy/geoserver/mb_planos/v_balnearios/ows?service=WFS&request=GetFeature&typeName=v_balnearios"),
c("Cursos de agua navegables y flotables", "MTOP", "MTOP", 32721, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/rec_hidrograficos/cursos_nav_flot/ows?service=WFS&request=GetFeature&typeName=cursos_nav_flot"),
c("Lagunas públicas", "MTOP", "MTOP", 32721, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/rec_hidrograficos/lagunas_publicas/ows?service=WFS&request=GetFeature&typeName=lagunas_publicas"),
c("Rutas", "IDE", "MIDES", 32721, "wfs", 2017,
"https://testmapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:Carreteras%20Uruguay"),
c("Calles", "IDE - UTE - IM", "MIDES", 32721, "wfs", 2017,
"https://mapas.mides.gub.uy/geoserver/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=IDE:EjesUruguayUTE,IDE:EjesMontevideoIM"),
c("Peajes", "MTOP", "MTOP", 4326, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/inf_tte_ttelog_terrestre/peajes/ows?service=WFS&request=GetFeature&typeName=peajes"),
c("Postes Kilometros", "MTOP", "MTOP", 32721, "wfs", 2019,
"https://geoservicios.mtop.gub.uy/geoserver/inf_tte_ttelog_terrestre/postes_km/ows?service=WFS&request=GetFeature&typeName=postes_km")
), stringsAsFactors = FALSE)
names(metadata) <- c("capa","productor","repositor","crs","formato","anio","url")
metadata %<>% mutate(crs = as.numeric(crs), anio = as.numeric(anio))
saveRDS(metadata,"data-raw/metadata.Rds")
usethis::use_data(metadata, overwrite = TRUE)
x <- geouy::metadata
cp <- load_geouy("Secciones")
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
y <- ifelse(x$repositor %in% "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs))
y %>% st_transform(crs)
}
cp <- load_geouy("Secciones")
load_geouy <- function(c, crs = 32721){
x <- geouy::metadata
x <- x[x$capa == c,]
ifelse(x$repositor %in% "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs)) %>% st_transform(crs)
}
cp <- load_geouy("Secciones")
x <- x[x$capa == c,]
c= "Secciones"
x <- x[x$capa == c,]
if_else(x$repositor %in% "SGM",
st_read("WFS:http://geoservicios.sgm.gub.uy/wfsPCN1000.cgi?",x$url, crs = x$crs),
st_read(x$url, crs = x$crs)) %>%
st_transform(crs)
library(geouy)
devtools::check_rhub()
devtools::check_rhub()
devtools::check_rhub()
devtools::check_rhub()
